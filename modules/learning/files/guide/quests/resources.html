<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Resources</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>
    <div id="page" class="page">
        <div id="site-header" role="banner">
    <div class="header-wrapper">
        <div class"region region-header">
            <div id="block-boxes-test" class="block block-boxes block-boxes simple logo block-odd">
                <div class="content">
                    <a href="/">
                        <img src="/assets/Puppet-Labs-Logo.png">
                    </a>
                </div>
            </div>
            <div id="block-menu_block-2" class="block block-menu-block header-primary-menu block-even">
                <div class="content">
                    <div class="menu-block-wrapper menu-block-2 menu-name-main-menu parent-mlid-0 menu-level-1">
                        <ul class="menu">
                            <li>
                                <a href="/quests/welcome.html">
                                    Quests
                                </a>
                            </li>
                            <li>
                                <a href="/">
                                    Progress
                                </a>
                            </li>
                            <li>
                                <a href="/">
                                    Cheat-Sheet
                                </a>
                            </li>
                            <li>
                                <a href="/">
                                    About
                                </a>
                            </li>
                            <li>
                                <a href="/">
                                    Resources
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

        <div id="main" clas="clearfix" role-"main">
        <aside id="sidebar-first" class="column sidebar first" role="complementary">
    <div id="sidebar-first-inner" class="inner">
        <div class="content">
            <h2>Quests</h2>
            <div class="menu-block-wrapper menu-block-7 menu-name-main-menu parent-mlid-0 meni-level-2">
                <ul class="menu">
                    
                        
                            <li>
                                <a href="/index.html">Welcome</a>
                            </li>
                        
                    
                        
                            <li class="active">
                                <a href="/quests/resources.html" class = "active">Resources</a>
                            </li>
                        
                    
                        
                            <li>
                                <a href="/quests/manifest_quest.html">Manifests</a>
                            </li>
                        
                    
                        
                            <li>
                                <a href="/quests/classes_quest.html">Classes</a>
                            </li>
                        
                    
                        
                            <li>
                                <a href="/quests/variables.html">Variables</a>
                            </li>
                        
                    
                        
                            <li>
                                <a href="/quests/conditions_quest.html">Conditional Statements</a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
    </div>
</aside>


            <div id="content" class="clearfix" role="main">

                <h1>Resources</h1>

<a id="quest_objectives"><h2>Quest Objectives</h2></a>

<p>In this quest you will be introduced to the fundamental applications of Puppet resources and using them to inspect the state of your Virtual Machine. The tasks we will accomplish in this quest will help you learn more about Puppet resources. If you're ready to get started, type the following command:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">quest --start resources
</code></pre></div>
<a id="puppet_resources"><h2>Puppet Resources</h2></a>

<p>As an aspiring practitioner of Puppet, it is important to have a thorough understanding of the relationship between the syntax of Puppet and the environment around you.</p>

<p>We'll begin with <strong>Resources</strong>, the basic units that Puppet uses to describe an environment.</p>

<a id="anatomy_of_a_resource"><h2>Anatomy of a Resource</h2></a>

<p>Know thyself, user, for you too are a resource. Use the following command to see how you look to Puppet:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">puppet resource user root
</code></pre></div>
<p>The output will look like this:</p>

<div class="highlight"><pre><code class="puppet"><span class="nc">user</span> <span class="p">{</span> <span class="s1">'root'</span><span class="p">:</span>
    <span class="nt">ensure</span>           <span class="p">=&gt;</span> <span class="s1">'present'</span><span class="p">,</span>
    <span class="nt">comment</span>          <span class="p">=&gt;</span> <span class="s1">'root'</span><span class="p">,</span>
    <span class="nt">gid</span>              <span class="p">=&gt;</span> <span class="s1">'0'</span><span class="p">,</span>
    <span class="nt">home</span>             <span class="p">=&gt;</span> <span class="s1">'/root'</span><span class="p">,</span>
    <span class="nt">password</span>         <span class="p">=&gt;</span> <span class="s1">'$1$jrm5tnjw$h8JJ9mCZLmJvIxvDLjw1M/'</span><span class="p">,</span>
    <span class="nt">password_max_age</span> <span class="p">=&gt;</span> <span class="s1">'99999'</span><span class="p">,</span>
    <span class="nt">password_min_age</span> <span class="p">=&gt;</span> <span class="s1">'0'</span><span class="p">,</span>
    <span class="nt">shell</span>            <span class="p">=&gt;</span> <span class="s1">'/bin/bash'</span><span class="p">,</span>
    <span class="nt">uid</span>              <span class="p">=&gt;</span> <span class="s1">'0'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>

<p>This block of code that describes a resource is called a <strong>resource declaration</strong>. It's a little abstract, but a nice portrait, don't you think? </p>

<h3>Resource Type</h3>

<p>Look at the first line of the resource declaration. The word you see before the curly brace is the <strong>resource type</strong>, in this case, <code>user</code>. Just as any individual cat or dog is a member of its species (<em>Felis catus</em> and <em>Canus lupis familiaris</em> to be precise) any instance of a resource must be a member of a <strong>resource type</strong>. Think of this type as a framework that defines the range of characteristics an individual resource can have.</p>

<p>Though Puppet allows you to describe and manipulate a great variety of resource types, there are some core resource types you will encounter most often: </p>

<ul>
<li>
<code>user</code> A user</li>
<li>
<code>group</code> A user group</li>
<li>
<code>file</code> A specific file</li>
<li>
<code>package</code> A software package</li>
<li>
<code>service</code> A running service</li>
<li>
<code>cron</code> A scheduled cron job</li>
<li>
<code>exec</code> An external command</li>
<li>
<code>host</code> A host entry</li>
</ul>

<h3>Resource Title</h3>

<p>After the resource type comes a curly brace and a single-quoted <code>title</code> of the resource: in your case, 'root'. (Be proud to have such a noble title!) Because the title of a resource is used to identify it, it must be unique. No two resources of the same type can share the same title.</p>

<h3>Attribute Value Pairs</h3>

<p>After the colon, comes a list of <strong>attributes</strong> and their corresponding <strong>values</strong>. Each line consists of an attribute name, a <code>=&gt;</code> (hash rocket), a value, and a final comma. For example, the attribute value pair <code>home =&gt; '/root',</code> indicates that your home is set to the directory <code>/root</code>.</p>

<a id="puppet_dsl"><h2>Puppet DSL</h2></a>

<p>In general terms, a resource declaration will match the following pattern:</p>

<div class="highlight"><pre><code class="puppet"><span class="nc">type</span> <span class="p">{</span><span class="s1">'title'</span><span class="p">:</span>
    <span class="nt">attribute</span> <span class="p">=&gt;</span> <span class="s1">'value'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>

<div class="lvm-callout lvm-tip"><p>
Though a comma isn't strictly necessary at the end of the final attribute value pair, it is best practice to include it for the sake of consistency.
</p></div>

<p>The syntax you see here is an example of Puppet's Domain-Specific Language (DSL), which is built on the Ruby programming language. Because the Puppet DSL is a <strong>declarative</strong> language rather than a <strong>procedural</strong> one, the descriptions themselves have the power to change the state of the environment. Use the DSL to paint a picture of what you want to see, and Puppet's providers will make it so.</p>

<p>The first step in mastering Puppet is to learn to understand the world around you as a collection of <strong>resources</strong>. You will not be using resource declarations to shape your environment just yet. Instead you will exercise your power by hand and use Puppet only to inspect the consequences of your actions.</p>

<div class="lvm-task-number"><p>Task 1 :</p></div>

<p>The path to greatness is a lonely one. Fortunately, your superuser status gives you the ability to create an assistant for yourself:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">useradd ralph
</code></pre></div>
<p>Awesome! Did you notice that your 'completed tasks' increased to 1/6? Check on your progress to see how you're doing.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">quest --progress
</code></pre></div>
<p>This shows your progress by displaying tasks that you have completed and tasks that still need completeing.</p>

<div class="lvm-task-number"><p>Task 2 :</p></div>

<p>Now take a look at your creation:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">puppet resource user ralph
</code></pre></div>
<p>Potent stuff. Note that Ralph's password attribute is set to <code>'!!'</code>. This isn't a proper password at all! In fact, it's a special value indicating Ralph has no password whatsoever.</p>

<div class="lvm-task-number"><p>Task 3 :</p></div>

<p>Rectify the situation. Set Ralph's password to <em>puppetlabs</em>.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">passwd ralph
</code></pre></div>
<p>If you take another look at <code>puppet resource user ralph</code>, the value for his password attribute should now be set to a SHA1 hash of his password, something a little like: <code>'$1$hNahKZqJ$9ul/RR2U.9ITZlKcMbOqJ.'</code></p>

<div class="lvm-task-number"><p>Task 4 :</p></div>

<p>Now have a look at Ralph's home directory. When you created him, it was set to <code>'/home/ralph'</code> by default. His home is a <code>directory</code>, which is really just a special kind of the resource type <code>file</code>. The <code>title</code> of any file is the same as the path to that file. Take a look at Ralph's home directory. Enter the command:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">puppet resource file /home/ralph/spells
</code></pre></div>
<div class="lvm-task-number"><p>Task 5 :</p></div>

<p>What? <code>ensure =&gt; 'absent',</code>? Values of the <code>ensure</code> attribute indicate the basic state of a resource. A value of absent means it doesn't exist at all. When you created Ralph, you automatically assigned him an address, but neglected to put anything there. Do this now:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">mkdir /home/ralph/spells
</code></pre></div>
<p>Now have another look:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">puppet resource file /home/ralph/spells
</code></pre></div>
<p>You're on a roll! So far you have completed 5/6 tasks. Let's take a look at what you have completed so far.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">quest --brief
</code></pre></div>
<p>Almost there to officially completing your first quest!</p>

<div class="lvm-task-number"><p>Task 6 :</p></div>

<p>Just one more thing. Ralph does not want his spells to be seen by anyone else! Let's make it so:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">chmod 700 /home/ralph/spells
</code></pre></div>
<p>..and inspect the result one more time:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">puppet resource file /home/ralph/spells
</code></pre></div>
<!-- Add a culminating exercise utilizing other resources -->

<a id="the_resource_abstraction_layer"><h2>The Resource Abstraction Layer</h2></a>

<p>If you completed this quest, you will be familiar with the basics of resources. A great part of the utility of resources, however, is in their power to abstract away the partocularities of a system while still providing a full description of your environment. </p>

<p>Puppet takes the descriptions expressed by resource declarations and uses providers to implement the system-specific processes to realize them. These Providers abstract away the complexity of managing diverse implementations of resource types on different systems. As a whole, this system of resource types and the providers that implement them is called the <strong>Resource Abstraction Layer</strong>, or <strong>RAL</strong>. If you want to create a user, for instance, Puppet's RAL will abstract away the <code>useradd</code> and <code>adduser</code>, giving you a single way to do things across systems. Similarly, when you wish to install a package, you can stand back and let Puppet's providers decide whether to use <code>yum</code> or <code>apt-get</code> for package management.</p>

<p>By harnessing the power of the RAL, you can be confident of the potency of your Puppet skills wherever your journey takes you.</p>


            </div>
        <div id="site-footer">
    <div class="footer-top">
    </div>
</div>

        </div>
    </div>
    </body>
</html>
